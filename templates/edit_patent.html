{% extends "base.html" %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>✏️ Edit Patent</h2>
        <a href="/faculty/{{ patent.faculty_id }}/publications" class="btn" style="background: #3498db;">← Back to R&D</a>
    </div>

    <form method="POST" style="background: #f8f9fa; padding: 25px; border-radius: 10px;">
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div>
                <label>Department:*</label>
                <select name="department" required>
                    <option value="">Select Department</option>
                    <option value="CIVIL" {% if patent.department == 'CIVIL' %}selected{% endif %}>CIVIL</option>
                    <option value="EEE" {% if patent.department == 'EEE' %}selected{% endif %}>EEE</option>
                    <option value="MECH" {% if patent.department == 'MECH' %}selected{% endif %}>MECH</option>
                    <option value="ECE" {% if patent.department == 'ECE' %}selected{% endif %}>ECE</option>
                    <option value="CSE" {% if patent.department == 'CSE' %}selected{% endif %}>CSE</option>
                    <option value="CSE-AI" {% if patent.department == 'CSE-AI' %}selected{% endif %}>CSE-AI</option>
                    <option value="CSE-DS" {% if patent.department == 'CSE-DS' %}selected{% endif %}>CSE-DS</option>
                    <option value="CSE-AI&ML" {% if patent.department == 'CSE-AI&ML' %}selected{% endif %}>CSE-AI&ML</option>
                    <option value="CSE-CS" {% if patent.department == 'CSE-CS' %}selected{% endif %}>CSE-CS</option>
                    <option value="IT" {% if patent.department == 'IT' %}selected{% endif %}>IT</option>
                </select>
            </div>
            <div>
                <label>Title of the Patent:*</label>
                <input type="text" name="patent_title" value="{{ patent.patent_title }}" required>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div>
                <label>Inventors:*</label>
                <textarea name="inventors" required placeholder="Enter all inventors separated by commas">{{ patent.inventors }}</textarea>
            </div>
            <div>
                <label>Corresponding Author/Applicant:*</label>
                <input type="text" name="corresponding_applicant" value="{{ patent.corresponding_applicant }}" required>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div>
                <label>Faculty Author Position:*</label>
                <select name="faculty_author_position" required>
                    <option value="">Select Position</option>
                    <option value="First Inventor" {% if patent.faculty_author_position == 'First Inventor' %}selected{% endif %}>First Inventor</option>
                    <option value="Second Inventor" {% if patent.faculty_author_position == 'Second Inventor' %}selected{% endif %}>Second Inventor</option>
                    <option value="Corresponding Applicant" {% if patent.faculty_author_position == 'Corresponding Applicant' %}selected{% endif %}>Corresponding Applicant</option>
                    <option value="Co-inventor" {% if patent.faculty_author_position == 'Co-inventor' %}selected{% endif %}>Co-inventor</option>
                </select>
            </div>
            <div>
                <label>Patent Application Number:*</label>
                <input type="text" name="patent_application_number" value="{{ patent.patent_application_number }}" required>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div>
                <label>Date of Filing:</label>
                <input type="date" name="filing_date" value="{{ patent.filing_date or '' }}">
            </div>
            <div>
                <label>Date of Publication:</label>
                <input type="date" name="publication_date" value="{{ patent.publication_date or '' }}">
            </div>
            <div>
                <label>Date of Grant:</label>
                <input type="date" name="grant_date" value="{{ patent.grant_date or '' }}">
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div>
                <label>Patent Office:*</label>
                <input type="text" name="patent_office" value="{{ patent.patent_office }}" required placeholder="e.g., Indian Patent Office, USPTO">
            </div>
            <div>
                <label>Status:*</label>
                <select name="status" required>
                    <option value="">Select Status</option>
                    <option value="Filed" {% if patent.status == 'Filed' %}selected{% endif %}>Filed</option>
                    <option value="Published" {% if patent.status == 'Published' %}selected{% endif %}>Published</option>
                    <option value="Granted" {% if patent.status == 'Granted' %}selected{% endif %}>Granted</option>
                </select>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div>
                <label>Patent Type:*</label>
                <select name="patent_type" required>
                    <option value="">Select Type</option>
                    <option value="National" {% if patent.patent_type == 'National' %}selected{% endif %}>National</option>
                    <option value="International" {% if patent.patent_type == 'International' %}selected{% endif %}>International</option>
                </select>
            </div>
            <div>
                <label>Patent Link/Reference:</label>
                <input type="url" name="patent_link" value="{{ patent.patent_link or '' }}" placeholder="https://">
            </div>
        </div>

        <div style="margin-bottom: 15px;">
            <label>Patent Certificate Drive Link:</label>
            <input type="url" name="certificate_link" value="{{ patent.certificate_link or '' }}" placeholder="https://drive.google.com/..." style="width: 100%;">
        </div>

        <div style="display: flex; gap: 10px;">
            <button type="submit" class="btn" style="background: #27ae60;">Update Patent</button>
            <a href="/faculty/{{ patent.faculty_id }}/publications" class="btn" style="background: #95a5a6;">Cancel</a>
        </div>
    </form>
</div>

<style>
input, select, textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #2c3e50;
}
</style>
{% endblock %}